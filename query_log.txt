//Create ChildSubCategory Query : 
CREATE TABLE `bidding_app`.`bs_childsubcategories` ( `id` VARCHAR(255) NOT NULL , `cat_id` VARCHAR(255) NOT NULL , `sub_cat_id` VARCHAR(255) NOT NULL , `name` VARCHAR(255) NOT NULL , `status` TINYINT(1) NULL DEFAULT NULL , `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , `added_user_id` VARCHAR(255) NULL DEFAULT NULL , `updated_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' , `updated_flag` INT(11) NULL DEFAULT NULL ) ENGINE = InnoDB;

//Alter child_subcategory table's id column as autoincreamented field
ALTER TABLE `bs_childsubcategories` CHANGE `id` `id` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL;

//Alter child_subcategory table's id column as primary key field
ALTER TABLE `bs_childsubcategories` ADD PRIMARY KEY(`id`);

//Added New Module for Sidebar Menu
INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'childsubcategories', 'ChildSubCategories', 'child_subcat_module', '', '20', '1', '1')

Alter query to add filters in ChildSubCategories
ALTER TABLE `bs_childsubcategories` ADD `is_brand_filter` TINYINT(1) NULL AFTER `name`, ADD `is_color_filter` TINYINT(1) NULL AFTER `is_brand_filter`, ADD `is_size_filter` TINYINT(1) NULL AFTER `is_color_filter`;

Created new table for child_subcategory & sizegroups association
CREATE TABLE `bidding_app`.`bs_childsubcategory_sizegroups` ( `id` VARCHAR(255) NOT NULL , `child_subcategory_id` VARCHAR(255) NULL , `sizegroup_id` VARCHAR(255) NULL , `added_date` TIMESTAMP NULL ) ENGINE = InnoDB;
ALTER TABLE `bs_childsubcategory_sizegroups` ADD PRIMARY KEY(`id`);


// 10-05-2021
//Added New Module for Sidebar Menu
INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'colors', 'Colors', 'colors', '', '21', '1', '1')

// Create color table
CREATE TABLE `bidding_app`.`bs_color` ( `id` VARCHAR(255) NOT NULL , `name` VARCHAR(255) NOT NULL , `code` VARCHAR(255) NOT NULL , `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , `added_user_id` VARCHAR(255) NULL DEFAULT NULL , `updated_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' , `updated_flag` INT(11) NULL DEFAULT NULL ) ENGINE = InnoDB;

//Alter color table's id column as primary key field
ALTER TABLE `bs_color` ADD PRIMARY KEY(`id`);

// Add auto increment primary key in childsubcategory_sizegroup
ALTER TABLE `bs_childsubcategory_sizegroups` CHANGE `id` `id` INT(11) NOT NULL AUTO_INCREMENT;


// Add modules for sidebar
INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'brand', 'Brands', 'brand_module', '', '23', '1', '1')

INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'sizegroup', 'Sizegroup', 'sizegroup_module', '', '24', '1', '1')

INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'deliverymethod', 'Deliverymethod', 'deliverymethod_module', '', '25', '1', '1')

// Added on 13-05-2021
INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'blockuserreason', 'Block User Reasons', 'blockuserreasons', '', '26', '1', '1')

INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'reportitemreason', 'Report Item Reasons', 'reportitemreasons', '', '27', '1', '1')

//Create Block User Reasons Query : 
CREATE TABLE `bidding_app`.`bs_blockuserreasons` ( `id` INT(11) NOT NULL AUTO_INCREMENT , `name` VARCHAR(255) NOT NULL , `status` TINYINT(1) NULL DEFAULT '1' , `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , `added_user_id` VARCHAR(255) NULL DEFAULT NULL , `updated_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' , `updated_flag` INT(11) NULL DEFAULT NULL, PRIMARY KEY (id) ) ENGINE = InnoDB;

//Create Report Item Reasons Query : 
CREATE TABLE `bidding_app`.`bs_reportitemreasons` ( `id` INT(11) NOT NULL AUTO_INCREMENT , `name` VARCHAR(255) NOT NULL , `status` TINYINT(1) NULL DEFAULT '1' , `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , `added_user_id` VARCHAR(255) NULL DEFAULT NULL , `updated_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' , `updated_flag` INT(11) NULL DEFAULT NULL, PRIMARY KEY (id) ) ENGINE = InnoDB;

// Added on 14-05-2021
INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'returnreason', 'Return Reasons', 'returnreasons', '', '28', '1', '1')

INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'promotingitemplan', 'Promoting Item Plans', 'promotingitemplans', '', '29', '1', '1')

//Create Return Reasons Query : 
CREATE TABLE `bidding_app`.`bs_returnreasons` ( `id` INT(11) NOT NULL AUTO_INCREMENT , `name` VARCHAR(255) NOT NULL , `status` TINYINT(1) NULL DEFAULT '1' , `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , `added_user_id` VARCHAR(255) NULL DEFAULT NULL , `updated_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' , `updated_flag` INT(11) NULL DEFAULT NULL, PRIMARY KEY (id) ) ENGINE = InnoDB;

//Create Promoting Item Plans Query : 
CREATE TABLE `bidding_app`.`bs_promotingitemplans` ( `id` INT(11) NOT NULL AUTO_INCREMENT , `name` VARCHAR(255) NOT NULL , `code` VARCHAR(255) NOT NULL , `price` VARCHAR(255) NOT NULL , `days` INT(11) NOT NULL DEFAULT '0' , `status` TINYINT(1) NULL DEFAULT '1' , `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , `added_user_id` VARCHAR(255) NULL DEFAULT NULL , `updated_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' , `updated_flag` INT(11) NULL DEFAULT NULL, PRIMARY KEY (id) ) ENGINE = InnoDB;

// Added on 18-05-2021

// Create Address table
CREATE TABLE `bidding_app`.`bs_addresses` ( `id` VARCHAR(255) NOT NULL , `address1` VARCHAR(255) NOT NULL , `address2` VARCHAR(255) DEFAULT NULL , `zipcode` VARCHAR(255) NOT NULL , `state` VARCHAR(255) NOT NULL , `city` VARCHAR(255) NOT NULL , `country` VARCHAR(255) NOT NULL , `latitude` VARCHAR(255) NOT NULL , `longitude` VARCHAR(255) NOT NULL , `is_home_address` TINYINT(1) NULL DEFAULT '0' , `is_default_address` TINYINT(1) NULL DEFAULT '0' ,`status` TINYINT(1) NULL DEFAULT '1' , `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , `user_id` VARCHAR(255) NULL DEFAULT NULL , `updated_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' , PRIMARY KEY (id) ) ENGINE = InnoDB;
// Added on 18-5-2021

INSERT INTO `bs_items_types` (`id`, `name`, `status`, `added_date`) VALUES
('1', 'Request All I Want', 1, '2021-05-18 09:58:54'),
('2', 'Selling All I Want', 1, '2021-05-18 10:11:37'),
('3', 'Selling / Exchange All I Want', 1, '2021-05-18 10:15:00');

UPDATE `bs_items_types` SET `name` = 'Request All I Want' WHERE `bs_items_types`.`id` = '1';
UPDATE `bs_items_types` SET `name` = 'Selling All I Want' WHERE `bs_items_types`.`id` = '2';
UPDATE `bs_items_types` SET `name` = 'Selling / Exchange All I Want' WHERE `bs_items_types`.`id` = '3';

INSERT INTO `bs_deliverymethod` (`id`, `name`, `status`, `added_date`) VALUES
(1, 'Pick - Up Only', 1, '2021-04-13 06:57:51'),
(2, 'Delivery Only', 1, '2021-05-18 10:57:42'),
(3, 'Delivery + Pick Up', 1, '2021-05-18 10:59:00');

UPDATE `bs_deliverymethod` SET `name` = 'Pick - Up Only ' WHERE `bs_deliverymethod`.`id` = 1;
UPDATE `bs_deliverymethod` SET `name` = 'Delivery Only' WHERE `bs_deliverymethod`.`id` = '2';
UPDATE `bs_deliverymethod` SET `name` = 'Delivery + Pick Up' WHERE `bs_deliverymethod`.`id` = 3;


// Added on 20-05-2021
ALTER TABLE core_users ADD accept_delivery_id int(11);

// Added on 24-05-2021
ALTER TABLE core_users ADD pickup_search_distance DOUBLE NULL;

// Added on 28-05-2021

INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'packagesize', 'Package Sizes', 'packagesizes', '', '30', '1', '1')

//Create Packagesizes Table Query : 
CREATE TABLE `bidding_app`.`bs_packagesizes` ( `id` VARCHAR(255) NOT NULL , `name` VARCHAR(255) NOT NULL , `length` VARCHAR(255) NOT NULL , `width` VARCHAR(255) NOT NULL , `height` VARCHAR(255) NOT NULL , `weight` VARCHAR(255) NOT NULL , `status` TINYINT(1) NULL DEFAULT '1' , `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , `added_user_id` VARCHAR(255) NULL DEFAULT NULL , `updated_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' , PRIMARY KEY (id) ) ENGINE = InnoDB;


INSERT INTO `core_modules` (`module_id`, `module_name`, `module_desc`, `module_lang_key`, `module_icon`, `ordering`, `is_show_on_menu`, `group_id`) VALUES (NULL, 'shippingcarrier', 'Shipping Carriers', 'shippingcarriers', '', '31', '1', '1')


//Create Shipping carrier Table Query : 
CREATE TABLE `bidding_app`.`bs_shippingcarriers` ( `id` VARCHAR(255) NOT NULL , `name` VARCHAR(255) NOT NULL , `packagesize_id` VARCHAR(255) NOT NULL ,`price` VARCHAR(255) NOT NULL , `min_days` int(11) NOT NULL , `max_days` int(11) NOT NULL , `status` TINYINT(1) NULL DEFAULT '1' , `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , `added_user_id` VARCHAR(255) NULL DEFAULT NULL , `updated_date` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' , PRIMARY KEY (id) ) ENGINE = InnoDB;

// Added on 04-06-2021
// Create Blacklist table Query :
CREATE TABLE `bidding_app`.`bs_blacklist` ( `id` VARCHAR(255) NOT NULL , `token` TEXT NOT NULL , `user_id` VARCHAR(255) NOT NULL ,`added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , PRIMARY KEY (id) ) ENGINE = InnoDB;

// Added on 09-06-2021
ALTER TABLE core_backend_config ADD selling_fees DOUBLE NOT NULL DEFAULT '10';

// Added on 10-06-2021

// Add new features in items table
ALTER TABLE bs_items ADD childsubcat_id varchar(255) NOT NULL, ADD sizegroup_id int(11), ADD is_all_colors TINYINT(1) NULL DEFAULT '0', ADD delivery_method_id int(11) NOT NULL, ADD Address_id VARCHAR(255) NOT NULL, ADD pieces int(11) NOT NULL DEFAULT '0', ADD is_negotiable TINYINT(1) NULL DEFAULT '0', ADD negotiable_percentage DOUBLE, ADD expiration_date_days int(11), ADD expiration_date  DATE NULL DEFAULT NULL, ADD observation TEXT, ADD is_draft TINYINT(1) NULL DEFAULT '0', ADD pay_shipping_by ENUM('1','2') COMMENT '1 for buyer, 2 for seller', ADD shipping_type ENUM('1','2') COMMENT '1 for prepaid-label, 2 for manual-delivery', ADD packagesize_id VARCHAR(255), ADD shippingcarrier_id VARCHAR(255), ADD shipping_cost_by_seller DOUBLE, ADD is_confirm_with_seller TINYINT(1) NULL DEFAULT '0', ADD is_exchange TINYINT(1) NULL DEFAULT '0' , ADD is_accept_similar TINYINT(1) NULL DEFAULT '0'; 

// Create Item color table Query :
CREATE TABLE `bidding_app`.`bs_item_colors` ( `id` VARCHAR(255) NOT NULL , `color_id` VARCHAR(255) NOT NULL , `item_id` VARCHAR(255) NOT NULL ,`added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , PRIMARY KEY (id) ) ENGINE = InnoDB;

// Create Item exchange table Query :
CREATE TABLE `bidding_app`.`bs_item_exchange` ( `id` VARCHAR(255) NOT NULL , `cat_id` VARCHAR(255) NOT NULL , `item_id` VARCHAR(255) NOT NULL ,`added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , PRIMARY KEY (id) ) ENGINE = InnoDB;

// Create Item similar criteria table Query :
CREATE TABLE `bidding_app`.`bs_item_similarcreteria` ( `id` VARCHAR(255) NOT NULL , `similarcreteria_id` int(11) NOT NULL , `item_id` VARCHAR(255) NOT NULL ,`added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , PRIMARY KEY (id) ) ENGINE = InnoDB;

// Create Item sizegroup options table Query :
CREATE TABLE `bidding_app`.`bs_item_sizegroupoptions` ( `id` VARCHAR(255) NOT NULL , `sizegroup_option_id` int(11) NOT NULL , `item_id` VARCHAR(255) NOT NULL ,`added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP , PRIMARY KEY (id) ) ENGINE = InnoDB;

// Added on 17-06-2021
ALTER TABLE bs_items ADD pickup_distance DOUBLE NULL;

// Added on 21-06-2021
ALTER TABLE bs_shippingcarriers ADD shippo_object_id VARCHAR(255) NULL;

// Added on 22-06-2021
ALTER TABLE bs_items ADD is_confirm TINYINT(1) NULL DEFAULT '0';

ALTER TABLE core_images ADD PRIMARY KEY (img_id)

// Added on 09-07-2021
ALTER TABLE `bs_chat_history` ADD `size_id` VARCHAR(255) NULL AFTER `nego_price`, ADD `color_id` VARCHAR(255) NULL AFTER `size_id`, ADD `quantity` INT(11) NULL AFTER `color_id`;

ALTER TABLE `bs_chat_history` CHANGE `item_id` `requested_item_id` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;
ALTER TABLE `bs_chat_history` CHANGE `requested_item_id` `requested_item_id` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL, CHANGE `buyer_user_id` `buyer_user_id` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL, CHANGE `seller_user_id` `seller_user_id` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL, CHANGE `nego_price` `nego_price` DOUBLE NULL, CHANGE `buyer_unread_count` `buyer_unread_count` INT(11) NULL, CHANGE `seller_unread_count` `seller_unread_count` INT(11) NULL, CHANGE `added_date` `added_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP;

// Added on 15-07-2021
ALTER TABLE `bs_chat_history` ADD `parent_id` VARCHAR(255) NULL AFTER `seller_unread_count`;

// Added 19-07-2021
ALTER TABLE `bs_chat_history` ADD `exchange_id` VARCHAR(255) NULL AFTER `id`;
ALTER TABLE `bs_chat_history` ADD `operation_type` VARCHAR(255) NULL AFTER `type`;

// Added on 19-07-2021
CREATE TABLE `bs_cart` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` varchar(255) NOT NULL,
  `item_id` varchar(255) NOT NULL,
  `type_id` varchar(255) NOT NULL,
  `color_id` varchar(255) DEFAULT NULL,
  `size_id` varchar(255) DEFAULT NULL,
  `quantity` varchar(255) DEFAULT NULL,
  `brand` varchar(255) DEFAULT NULL,
  `created_date` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


// ADDED ON 20/07/2021
ALTER TABLE `core_backend_config` ADD `processing_fees` DOUBLE NULL AFTER `selling_fees`;

// ADDED ON 21/07/2021
ALTER TABLE `bs_chat_history` ADD `is_cancel` TINYINT(1) NULL DEFAULT '0' AFTER `is_accept`, 
ADD `cancel_reason` VARCHAR(255) NULL AFTER `is_cancel`, 
ADD `delivery_to` VARCHAR(255) NULL AFTER `cancel_reason`,  
ADD `payment_method_id` VARCHAR(255) NULL AFTER `delivery_to`;


CREATE TABLE `bidding_app`.`bs_exchange_chat_history` ( 
  `id` VARCHAR(255) NOT NULL , 
  `chat_id` VARCHAR(255) NOT NULL , 
  `operation_type` VARCHAR(255) NOT NULL , 
  `offered_item_id` VARCHAR(255) NOT NULL , 
  `is_featured` TINYINT(1) NULL DEFAULT '0' , 
  `date_added` DATETIME NOT NULL 
) ENGINE = InnoDB;


// SKV: ADDED ON 22/07/2021
ALTER TABLE `bs_chat_history` DROP `exchange_id`;